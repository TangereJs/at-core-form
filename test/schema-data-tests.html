<!doctype html>
<html>

<head>

  <title>at-form-text tests</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

  <script src="../../web-component-tester/browser.js"></script>
  <script src="../../iron-test-helpers/test-helpers.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="../at-core-form.html">

</head>

<body>

  <test-fixture>
    <template>
      <at-core-form></at-core-form>
    </template>
  </test-fixture>

  <script>
    suite('tests for schema and data where schema and data are set as properties', function() {

      suite('schema is invalid, data is invalid', function() {

        test('invalid schema, invalid data both provided as arrays of invalid values', function() {
          var invalidSchemas = [undefined, null, "", "undefined", "null", true, false, "true", "false", {},
            [],
            function() {
              return undefined;
            }
          ];
          var invalidDatas = [undefined, null, "", "undefined", "null", true, false, "true", "false", [], function() {
            return undefined;
          }];
          var coreForm = document.createElement('at-core-form');
          var insertPoint = coreForm.$.insertPoint;

          for (var i = 0; i < invalidSchemas.length; i++) {
            var schema = invalidSchemas[i];
            for (var j = 0; j < invalidDatas.length; j++) {
              var data = invalidDatas[j];
              coreForm.schema = schema;
              coreForm.data = data;

              /* assert what? */
              assert.isObject(coreForm._internalData, 'internal data is not set');
              assert.equal(Object.keys(coreForm._internalData).length, 0, 'internal data is not empty');
              assert.isArray(coreForm._elementsToValidate, 'elements to validate is not set');
              assert.equal(coreForm._elementsToValidate.length, 0, 'elements to validate is not empty');
              assert.equal(Polymer.dom(insertPoint).children.length, 1, 'insert point is not empty');
            }
          }
        });

      });

      suite('schema is invalid, data is valid', function() {
        test('schema is invalid, data is valid --- schema is provided as array of invalid values, data is empty object', function() {
          var invalidSchemas = [undefined, null, "", "undefined", "null", true, false, "true", "false", {},
            [],
            function() {
              return undefined;
            }
          ];
          var data = {};
          var coreForm = document.createElement('at-core-form');
          var insertPoint = coreForm.$.insertPoint;

          for (var i = 0; i < invalidSchemas.length; i++) {
            var schema = invalidSchemas[i];
            coreForm.schema = schema;
            coreForm.data = data;

            /* assert what? */
            assert.isObject(coreForm._internalData, 'internal data is not set');
            assert.equal(Object.keys(coreForm._internalData).length, 0, 'internal data is not empty');
            assert.isArray(coreForm._elementsToValidate, 'elements to validate is not set');
            assert.equal(coreForm._elementsToValidate.length, 0, 'elements to validate is not empty');
            assert.equal(Polymer.dom(insertPoint).children.length, 1, 'insert point is not empty');
          }
        });
      });

      suite('schema is valid, data is invalid', function() {
        test('schema is valid, data is invalid - schema is { properties : {} }, data is array of invalid values', function() {
          var schema = {
            properties: {}
          };
          var invalidDatas = [undefined, null, "", "undefined", "null", true, false, "true", "false", [], function() {
            return undefined;
          }];
          var coreForm = document.createElement('at-core-form');
          var insertPoint = coreForm.$.insertPoint;

          for (var j = 0; j < invalidDatas.length; j++) {
            var data = invalidDatas[j];
            coreForm.schema = schema;
            coreForm.data = data;

            /* assert what? */
            assert.isObject(coreForm._internalData, 'internal data is not set');
            assert.equal(Object.keys(coreForm._internalData).length, 0, 'internal data is not empty');
            assert.isArray(coreForm._elementsToValidate, 'elements to validate is not set');
            assert.equal(coreForm._elementsToValidate.length, 0, 'elements to validate is not empty');
            assert.equal(Polymer.dom(insertPoint).children.length, 1, 'insert point is not empty');
          }
        });
      });

      suite('schema is valid, data is valid', function() {

        test('schema is string, data is string', function() {

        });

        test('schema is string, data is object', function() {

        });

        test('schema is object, data is string', function() {

        });

        test('schema is object, data is object', function() {

        });

      });


    });
  </script>
</body>

</html>
